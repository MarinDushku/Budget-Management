<UserControl x:Class="BudgetManagement.Views.UserControls.BudgetTrendChartUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:oxy="http://oxyplot.org/wpf"
             FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
             FontSize="16">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Chart Title removed - handled by parent card -->

        <!-- Line Chart -->
        <oxy:PlotView Grid.Row="1" 
                      Model="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=LineChartModel}" 
                      Height="180"
                      MinHeight="160"
                      Background="Transparent"
                      Margin="0,12,0,8"/>

        <!-- Summary Statistics -->
        <StackPanel Grid.Row="2" Margin="0,16,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" 
                        Background="{StaticResource SurfaceElevatedBrush}" 
                        BorderBrush="{StaticResource AccentGreenBrush}"
                        BorderThickness="1"
                        CornerRadius="6" 
                        Padding="12,8" 
                        Margin="0,0,4,0">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Best Week" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="12" 
                                   FontWeight="Medium"
                                   Foreground="{StaticResource SecondaryTextBrush}"
                                   HorizontalAlignment="Center"
                                   TextOptions.TextRenderingMode="ClearType"/>
                        <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=BestWeekAmount, StringFormat=C}" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource AccentGreenBrush}"
                                   HorizontalAlignment="Center"
                                   TextOptions.TextRenderingMode="ClearType"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <Border Grid.Column="1" 
                        Background="{StaticResource SurfaceElevatedBrush}" 
                        BorderBrush="{StaticResource DangerRedBrush}"
                        BorderThickness="1"
                        CornerRadius="6" 
                        Padding="12,8" 
                        Margin="4,0,0,0">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Worst Week" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="12" 
                                   FontWeight="Medium"
                                   Foreground="{StaticResource SecondaryTextBrush}"
                                   HorizontalAlignment="Center"
                                   TextOptions.TextRenderingMode="ClearType"/>
                        <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=WorstWeekAmount, StringFormat=C}" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource DangerRedBrush}"
                                   HorizontalAlignment="Center"
                                   TextOptions.TextRenderingMode="ClearType"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Trend indicator -->
            <Border Background="{StaticResource SurfaceElevatedBrush}" 
                    BorderBrush="{StaticResource PrimaryBlueBrush}"
                    BorderThickness="1"
                    CornerRadius="6" 
                    Padding="12,8" 
                    Margin="0,8,0,0">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="10-Week Trend" 
                               FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                               FontSize="12" 
                               FontWeight="Medium"
                               Foreground="{StaticResource SecondaryTextBrush}"
                               HorizontalAlignment="Center"
                               TextOptions.TextRenderingMode="ClearType"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,4,0,0">
                        <TextBlock Text="{Binding TrendIndicator}" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="{Binding TrendColor}"
                                   TextOptions.TextRenderingMode="ClearType"/>
                        <TextBlock Text="{Binding TrendPercentage, StringFormat=P1}" 
                                   FontFamily="Segoe UI Variable, Segoe UI, Verdana, Tahoma, sans-serif"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="{Binding TrendColor}"
                                   Margin="6,0,0,0"
                                   TextOptions.TextRenderingMode="ClearType"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>